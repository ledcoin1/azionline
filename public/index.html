const socket = io();

const joinBtn = document.getElementById("joinBtn");
const nameInput = document.getElementById("nameInput");
const logDiv = document.getElementById("log");
const turnText = document.getElementById("turnText");

joinBtn.addEventListener("click", () => {
  const name = nameInput.value.trim();
  if (!name) return alert("–ê—Ç—ã“£–¥—ã –µ–Ω–≥—ñ–∑!");
  socket.emit("join", name);
  addLog(`–°–µ–Ω “õ–æ—Å—ã–ª–¥—ã“£: ${name}`);
});

// –ë–∞—Ä–ª—ã“õ –æ–π—ã–Ω—à—ã–ª–∞—Ä –∂–∞“£–∞—Ä—Ç—É—ã
socket.on("room_update", (data) => {
  addLog(`–ö–æ–º–Ω–∞—Ç–∞ –∂–∞“£–∞—Ä—Ç—ã–ª–¥—ã: ${data.players.map(p=>p.name).join(", ")} (${data.players.length}/3)`);
});

// –û–π—ã–Ω –±–∞—Å—Ç–∞–ª–¥—ã
socket.on("game_started", (data) => {
  addLog("üî• –û–π—ã–Ω –±–∞—Å—Ç–∞–ª–¥—ã!");
  addLog(`–û–π—ã–Ω—à—ã–ª–∞—Ä: ${data.players.map(p=>p.name).join(", ")}`);
});

// –°–µ–Ω—ñ“£ –∫–µ–∑–µ–≥—ñ“£
socket.on("your_turn", () => {
  turnText.textContent = "üåü –°–µ–Ω—ñ“£ –∫–µ–∑–µ–≥—ñ“£!";
  addLog("–°–∞“ì–∞–Ω —Å–∏–≥–Ω–∞–ª –∫–µ–ª–¥—ñ: —Å–µ–Ω—ñ“£ –∫–µ–∑–µ–≥—ñ“£!");
});

function addLog(msg) {
  const p = document.createElement("p");
  p.textContent = msg;
  logDiv.appendChild(p);
  logDiv.scrollTop = logDiv.scrollHeight;
}
