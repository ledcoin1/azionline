<!DOCTYPE html>
<html>
<head>
  <title>MiniApp</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h2 id="info">Ğ–Ò¯ĞºÑ‚ĞµĞ»ÑƒĞ´Ğµ...</h2>

<script>
const tg = window.Telegram.WebApp;
tg.expand(); // Ñ‚Ğ¾Ğ»Ñ‹Ò› ÑĞºÑ€Ğ°Ğ½

const user = tg.initDataUnsafe?.user;

if(!user){
  document.getElementById("info").innerText =
    "âŒ Telegram user Ñ‚Ğ°Ğ±Ñ‹Ğ»Ğ¼Ğ°Ğ´Ñ‹";
}else{

  fetch("/api/login", {
    method: "POST",
    headers:{
      "Content-Type":"application/json"
    },
    body: JSON.stringify({
      telegramId: String(user.id)
    })
  })
  .then(r=>r.json())
  .then(data=>{
    document.getElementById("info").innerText =
      "ğŸ†” ID: "+data.telegramId+
      "\nğŸ’° Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: "+data.balance;
  });

}
</script>

</body>
</html>
