<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>Telegram Game</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  background:#111;
  color:white;
  font-family:Arial;
  text-align:center;
}
.card{
  background:#1f1f1f;
  padding:20px;
  margin:50px auto;
  width:300px;
  border-radius:10px;
}
</style>
</head>
<body>

<div class="card">
  <h2>üéÆ –û–π—ã–Ω</h2>
  <p>ID: <span id="uid">...</span></p>
  <p>–ë–∞–ª–∞–Ω—Å: <b id="balance">0</b> ‚Ç∏</p>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

// Telegram user
const user = tg.initDataUnsafe.user;

if(!user){
  alert("Telegram –∞—Ä“õ—ã–ª—ã “ì–∞–Ω–∞ –∫—ñ—Ä—É–≥–µ –±–æ–ª–∞–¥—ã!");
}

// ID –∞–ª–∞–º—ã–∑
const telegramId = user.id;
document.getElementById("uid").innerText = telegramId;

// —Å–µ—Ä–≤–µ—Ä–≥–µ –∂—ñ–±–µ—Ä—É
fetch("/api/login", {
  method: "POST",
  headers: {"Content-Type":"application/json"},
  body: JSON.stringify({
    telegramId
  })
})
.then(res => res.json())
.then(data => {
  document.getElementById("balance").innerText = data.balance;
})
.catch(err=>{
  alert("Server error");
});
</script>

</body>
</html>
