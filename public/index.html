<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <title>–û–Ω–ª–∞–π–Ω –î—É—Ä–∞–∫</title>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
<h2>üÉè –û–Ω–ª–∞–π–Ω –î—É—Ä–∞–∫</h2>
<div id="status"></div>

<script>
  if (!window.Telegram || !Telegram.WebApp.initData) {
    document.body.innerHTML = "‚ùå –ë“±–ª –æ–π—ã–Ω —Ç–µ–∫ Telegram –∞—Ä“õ—ã–ª—ã –∞—à—ã–ª–∞–¥—ã";
    throw new Error("Not Telegram");
  }

  const user = Telegram.WebApp.initDataUnsafe.user;
  const userId = user.id;

  const socket = io();
  const roomId = "room1";

  socket.emit("joinRoom", { roomId, userId });

  socket.on("roomUpdate", players => {
    document.getElementById("status").innerText =
      "–ö–æ–º–Ω–∞—Ç–∞–¥–∞“ì—ã –æ–π—ã–Ω—à—ã–ª–∞—Ä: " + players.join(", ");
  });
</script>
</body>
</html>
