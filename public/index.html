<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <title>–î—É—Ä–∞–∫ | Online</title>

  <script src="/socket.io/socket.io.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1e1e1e;
      color: white;
      text-align: center;
    }

    button {
      padding: 12px 25px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      border: none;
    }

    #joinBtn {
      background: #00c853;
      color: black;
    }

    #game {
      display: none;
      padding-top: 20px;
    }

    .card {
      width: 60px;
      height: 90px;
      background: white;
      color: black;
      border-radius: 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin: 5px;
      font-weight: bold;
    }

    #hand {
      margin-top: 20px;
    }

    #status {
      margin-top: 15px;
      color: #aaa;
    }
  </style>
</head>

<body>

  <!-- START SCREEN -->
  <div id="start">
    <h1>üÉè –î—É—Ä–∞–∫ Online</h1>
    <button id="joinBtn">–û–π—ã–Ω“ì–∞ “õ–æ—Å—ã–ª—É</button>
    <p id="status"></p>
  </div>

  <!-- GAME SCREEN -->
  <div id="game">
    <h2 id="opponentText">“ö–∞—Ä—Å—ã–ª–∞—Å –∫“Ø—Ç—ñ–ª—É–¥–µ...</h2>

    <h3>–°–µ–Ω—ñ“£ –∫–∞—Ä—Ç–∞–ª–∞—Ä—ã“£</h3>
    <div id="hand"></div>
  </div>

<script>
  const socket = io();

  const joinBtn = document.getElementById("joinBtn");
  const statusText = document.getElementById("status");
  const startScreen = document.getElementById("start");
  const gameScreen = document.getElementById("game");
  const opponentText = document.getElementById("opponentText");
  const handDiv = document.getElementById("hand");

  // –ñ–∞–π demo userId
  const userId = "USER_" + Math.floor(Math.random() * 10000);

  joinBtn.onclick = () => {
    socket.emit("joinGame", { userId });
    statusText.innerText = "–°–µ—Ä–≤–µ—Ä–≥–µ “õ–æ—Å—ã–ª—É–¥–∞...";
    joinBtn.disabled = true;
  };

  // –°–µ—Ä–≤–µ—Ä–¥–µ–Ω —Ç–µ–∫—Å—Ç —Ö–∞–±–∞—Ä
  socket.on("message", (msg) => {
    statusText.innerText = msg;
  });

  // “ö–∞—Ä—Å—ã–ª–∞—Å —Ç–∞–±—ã–ª–¥—ã
  socket.on("opponentFound", ({ opponentId }) => {
    startScreen.style.display = "none";
    gameScreen.style.display = "block";

    opponentText.innerText = "“ö–∞—Ä—Å—ã–ª–∞—Å: " + opponentId;

    // demo “Ø—à—ñ–Ω 3 –∫–∞—Ä—Ç–∞ —Å–∞–ª–∞–º—ã–∑
    showCards(["6‚ô†", "10‚ô¶", "K‚ô•"]);
  });

  function showCards(cards) {
    handDiv.innerHTML = "";
    cards.forEach(card => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerText = card;
      handDiv.appendChild(div);
    });
  }
</script>

</body>
</html>
